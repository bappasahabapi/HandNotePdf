# ЁЯФе03A-Liskov Substitution Principle (LSP)

## ржнрзВржорж┐ржХрж╛

рж▓рж┐рж╕рзНржХржн рж╕рж╛ржмрж╕рзНржЯрж┐ржЯрж┐ржЙрж╢ржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓ (Liskov Substitution Principle) ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирзАрждрж┐ ржпрж╛ ржЕржмржЬрзЗржХрзНржЯ ржУрж░рж┐рзЯрзЗржирзНржЯрзЗржб ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВрзЯрзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ рждрзИрж░рж┐ред ржПржЗ ржирзАрждрж┐рж░ ржорзВрж▓ ржмржХрзНрждржмрзНржп рж╣рж▓: 

- **"ржЕржмржЬрзЗржХрзНржЯржЧрзБрж▓рзЛржХрзЗ рждрж╛ржжрзЗрж░ рж╕рж╛ржмржЯрж╛ржЗржк ржжрж┐рзЯрзЗ ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржЙржЪрж┐ржд, ржпрж╛рждрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ рж╕ржарж┐ржХрждрж╛ ржкрзНрж░ржнрж╛ржмрж┐ржд ржирж╛ рж╣рзЯред"**

- **"Objects should be replaceable with their subtypes without affecting the correctness of the program."**

## ржЗржирж╣рзЗрж░рж┐ржЯрзЗржирзНрж╕ ржПржмржВ 'Is-A' рж╕ржорзНржкрж░рзНржХ

**Inheritance** рж╣рж▓ ржЕржмржЬрзЗржХрзНржЯ ржУрж░рж┐рзЯрзЗржирзНржЯрзЗржб ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВрзЯрзЗрж░ ржПржХржЯрж┐ ржорзМрж▓рж┐ржХ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп, ржпрж╛ 'Is-A' рж╕ржорзНржкрж░рзНржХ рж╣рж┐рж╕рзЗржмрзЗ ржкрж░рж┐ржЪрж┐рждред 

### ржЙржжрж╛рж╣рж░ржг рзз: ржЧрж╛ржбрж╝рж┐ ржХрзНрж▓рж╛рж╕

ржзрж░рж┐, ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ `Car` ржХрзНрж▓рж╛рж╕ ржЖржЫрзЗред 

```java
class Car {
    // ржЧрж╛ржбрж╝рж┐рж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржПржмржВ ржкржжрзНржзрждрж┐
}
```

ржПржЦржи, ржПржХржЯрж┐ `Hatchback` ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж┐ ржпрж╛ `Car` ржХрзНрж▓рж╛рж╕ ржерзЗржХрзЗ рж╕ржорзНржкрзНрж░рж╕рж╛рж░рж┐рждред

```java
class Hatchback extends Car {
    // рж╣рзНржпрж╛ржЪржмрзНржпрж╛ржХрзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржПржмржВ ржкржжрзНржзрждрж┐
}
```

ржПржЦржи ржЖржорж░рж╛ ржмрж▓рждрзЗ ржкрж╛рж░рж┐, "рж╣рзНржпрж╛ржЪржмрзНржпрж╛ржХ ржПржХржЯрж┐ ржЧрж╛ржбрж╝рж┐ред"

### ржЙржжрж╛рж╣рж░ржг рзи: ржкрж╛ржЦрж┐ ржХрзНрж▓рж╛рж╕

ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ `Bird` ржХрзНрж▓рж╛рж╕ ржЖржЫрзЗ ржПржмржВ `Ostrich` ржХрзНрж▓рж╛рж╕ржЯрж┐ `Bird` ржерзЗржХрзЗ рж╕ржорзНржкрзНрж░рж╕рж╛рж░рж┐рждред

```java
class Bird {
    void fly() {
        // ржЙржбрж╝рж╛рж░ ржкржжрзНржзрждрж┐
    }
}

class Ostrich extends Bird {
    @Override
    void fly() {
        // ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБржЗ ржирзЗржЗ, ржХрж╛рж░ржг ржЙржбрж╝рждрзЗ ржкрж╛рж░рзЗ ржирж╛
    }
}
```

ржПржЦржи ржЖржорж░рж╛ ржмрж▓рждрзЗ ржкрж╛рж░рж┐, "ржЕрж╕рзНржЯрзНрж░рж┐ржЪ ржПржХржЯрж┐ ржкрж╛ржЦрж┐ред"

### ржЙржжрж╛рж╣рж░ржг рзй: ржЬрзНржмрж╛рж▓рж╛ржирж┐ ржХрзНрж▓рж╛рж╕

ржЖржорж░рж╛ `Fuel` ржПржмржВ `Gasoline` ржПрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХржУ ржжрзЗржЦрждрзЗ ржкрж╛рж░рж┐ред

```java
class Fuel {
    // ржЬрзНржмрж╛рж▓рж╛ржирж┐рж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржПржмржВ ржкржжрзНржзрждрж┐
}

class Gasoline extends Fuel {
    // ржЧрзНржпрж╛рж╕рзЛрж▓рж┐ржирзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржПржмржВ ржкржжрзНржзрждрж┐
}
```

### Problems
At first glance, these examples seem perfect, but there are hidden problems with this approach. Particularly, the second example has an issue.

### Analysis
- An ostrich is a bird, but it cannot fly.
- We have a **Bird** class with a `fly` method.
- When the Ostrich class extends the Bird class, it overrides the `fly` method and leaves it unimplemented.

### ржЕрж╕рзНржЯрзНрж░рж┐ржЪрзЗрж░ рж╕ржорж╕рзНржпрж╛

ржпржжрж┐ржУ ржЕрж╕рзНржЯрзНрж░рж┐ржЪ ржПржХржЯрж┐ ржкрж╛ржЦрж┐, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржЙржбрж╝рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред 

ржпржЦржи ржЖржорж░рж╛ `Bird` ржХрзНрж▓рж╛рж╕рзЗ `fly()` ржорзЗржержб рждрзИрж░рж┐ ржХрж░рж┐, рждржЦржи `Ostrich` ржХрзНрж▓рж╛рж╕рзЗ ржПржЗ ржорзЗржержбржЯрж┐ ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж╣ржпрж╝рзЗ ржкржбрж╝рзЗред 

```java
class Ostrich extends Bird {
    @Override
    void fly() {
        // ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБржЗ ржирзЗржЗ, ржХрж╛рж░ржг ржЕрж╕рзНржЯрзНрж░рж┐ржЪ ржЙржбрж╝рждрзЗ ржкрж╛рж░рзЗ ржирж╛
    }
}
```

ржЕрж░рзНржерж╛рзО, ржпржжрж┐ ржЖржорж░рж╛ `Bird` ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ `Ostrich` ржЕржмржЬрзЗржХрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ ржПржмржВ ржХрзЗржЙ `fly()` ржорзЗржержб ржХрж▓ ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржмрзНржпрж░рзНрже рж╣ржмрзЗред

## рж▓рж┐рж╕рзНржХржн ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓рзЗрж░ ржЧрзБрж░рзБрждрзНржм

рж▓рж┐рж╕рзНржХржн рж╕рж╛ржмрж╕рзНржЯрж┐ржЯрж┐ржЙрж╢ржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓ ржЖржорж╛ржжрзЗрж░ ржмрж▓рзЗ ржпрзЗ:

> "ржЕржмржЬрзЗржХрзНржЯржЧрзБрж▓рзЛржХрзЗ рждрж╛ржжрзЗрж░ рж╕рж╛ржмржЯрж╛ржЗржк ржжрж┐рзЯрзЗ ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржЙржЪрж┐ржд, ржпрж╛рждрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ рж╕ржарж┐ржХрждрж╛ ржкрзНрж░ржнрж╛ржмрж┐ржд ржирж╛ рж╣рзЯред"

ржПржЯрж┐ 'Is-A' рж╕ржорзНржкрж░рзНржХрзЗрж░ ржЪрзЗржпрж╝рзЗ ржмрзЗрж╢рж┐ ржХржарзЛрж░ ржкрж░рзАржХрзНрж╖рж╛ ржжрж╛ржмрж┐ ржХрж░рзЗред 

### рж╕ржарж┐ржХ ржЕрзНржпрж╛ржмрж╕рзНржЯрзНрж░рж╛ржХрж╢ржи


рж▓рж┐рж╕рзНржХржнрзЗрж░ ржжрзГрж╖рзНржЯрж┐ржнржЩрзНржЧрж┐ рж╣рж▓:



> "ржпржжрж┐ ржПржЯрж┐ ржПржХржЯрж┐ рж╣рж╛ржБрж╕рзЗрж░ ржорждрзЛ ржжрзЗржЦрж╛ржпрж╝ ржПржмржВ рж╣рж╛ржБрж╕рзЗрж░ ржорждрзЛ ржбрж╛ржХ ржжрзЗржпрж╝ ржХрж┐ржирзНрждрзБ ржмрзНржпрж╛ржЯрж╛рж░рж┐ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржЖржкржирж╛рж░ рж╕ржорзНржнржмржд ржнрзБрж▓ ржЕрзНржпрж╛ржмрж╕рзНржЯрзНрж░рж╛ржХрж╢ржи рж╣ржпрж╝рзЗржЫрзЗ!"


### Liskov's Perspective
The Liskov Principle requires us to move away from the 'is-a' way of thinking. A popular saying associated with this principle is:

**"If it looks like a duck and quacks like a duck but needs batteries, you probably have the wrong abstraction!"**

Instead, Liskov's way of thinking should be: **"Objects should be replaceable with their subtypes without affecting the correctness of the program."**

## ржЙржкрж╕ржВрж╣рж╛рж░

ржПржЦржи ржкрж░рзНржпржирзНржд ржЖржорж░рж╛ рж▓рж┐рж╕рзНржХржн рж╕рж╛ржмрж╕рзНржЯрж┐ржЯрж┐ржЙрж╢ржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓рзЗрж░ ржПржХржЯрж┐ ржЙржЪрзНржЪ рж╕рзНрждрж░рзЗрж░ ржкрж░рж┐ржЪржпрж╝ ржкрзЗржпрж╝рзЗржЫрж┐ред


--- 

# ЁЯФе03B-Liskov Substitution Principle (LSP) - ржЧржнрзАрж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

## ржнрзВржорж┐ржХрж╛

рж╕рзНржмрж╛ржЧрждржо! ржЖржЬржХрзЗрж░ рж╕рзЗрж╢ржирзЗ ржЖржорж░рж╛ рж▓рж┐рж╕рзНржХржн рж╕рж╛ржмрж╕рзНржЯрж┐ржЯрж┐ржЙрж╢ржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓ (LSP) ржЧржнрзАрж░ржнрж╛ржмрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░ржмред ржЖржорж░рж╛ ржжрзБржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржирзЗржм ржПржмржВ ржкрзНрж░рждрж┐ржЯрж┐рж░ ржбрж┐ржЬрж╛ржЗржи рждрзНрж░рзБржЯрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмред ржкрж░рзЗ, ржЖржорж░рж╛ LSP ржкрзНрж░рзЯрзЛржЧ ржХрж░рзЗ ржбрж┐ржЬрж╛ржЗржи ржЙржирзНржиржд ржХрж░ржмред

## ржЙржжрж╛рж╣рж░ржг рзз: ржЧрж╛ржбрж╝рж┐ ржПржмржВ рж░рзЗрж╕рж┐ржВ ржЧрж╛ржбрж╝рж┐

### рж╕ржорж╕рзНржпрж╛ ржЪрж┐рж╣рзНржирж┐рждржХрж░ржг

ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг `Car` ржХрзНрж▓рж╛рж╕ ржЖржЫрзЗ ржПржмржВ ржПржХржЯрж┐ `RacingCar` ржХрзНрж▓рж╛рж╕ ржпрж╛ `Car` ржерзЗржХрзЗ рж╕ржорзНржкрзНрж░рж╕рж╛рж░рж┐рждред 

```java
class Car {
    int getCabinWidth() {
        // ржЧрж╛ржбрж╝рж┐рж░ ржХрзЗржмрж┐ржирзЗрж░ ржкрзНрж░рж╕рзНрже ржлрзЗрж░ржд ржжрзЗрзЯ
        return 50; // ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк
    }
}

class RacingCar extends Car {
    @Override
    int getCabinWidth() {
        // ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБржЗ ржирзЗржЗ, ржХрж╛рж░ржг рж░рзЗрж╕рж┐ржВ ржЧрж╛ржбрж╝рж┐рж░ ржХрзЗржмрж┐ржи ржирзЗржЗ
    }
}
```

рж░рзЗрж╕рж┐ржВ ржЧрж╛ржбрж╝рж┐рж░ ржЬржирзНржп, ржХрзЗржмрж┐ржирзЗрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ "ржХржХржкрж┐ржЯ" ржерж╛ржХрзЗред рждрж╛ржЗ, `RacingCar` ржХрзНрж▓рж╛рж╕рзЗ `getCabinWidth()` ржорзЗржержбржЯрж┐ ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж╣рзЯрзЗ ржкрзЬрзЗред

### рж╕ржорж╕рзНржпрж╛ ржЙржжрзНржнржм

ржПржЦржи, ржпржжрж┐ ржЖржорж░рж╛ `CarUtils` ржХрзНрж▓рж╛рж╕рзЗ рждрж┐ржиржЯрж┐ ржЧрж╛ржбрж╝рж┐рж░ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рж┐:

```java
class CarUtils {
    List<Car> myCars = new ArrayList<>();
    
    void addCars() {
        myCars.add(new Car());
        myCars.add(new Car());
        myCars.add(new RacingCar());
    }
    
    void printCabinWidths() {
        for (Car car : myCars) {
            System.out.println(car.getCabinWidth());
        }
    }
}
```

ржПржЦржи, ржкрзНрж░ржержо ржжрзБржЯрж┐ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп `getCabinWidth()` ржорзЗржержб ржХрж╛ржЬ ржХрж░ржмрзЗ, ржХрж┐ржирзНрждрзБ рждрзГрждрзАржпрж╝ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп ржПржЯрж┐ ржмрзНржпрж░рзНрже рж╣ржмрзЗ ржХрж╛рж░ржг `RacingCar` ржХрзНрж▓рж╛рж╕рзЗ ржорзЗржержбржЯрж┐ ржЕржкрзНрж░ржпрж╝рзЛржЧрж┐рждред

### рж╕ржорж╛ржзрж╛ржи

ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржЗржирж╣рзЗрж░рж┐ржЯрзЗржирзНрж╕ ржнрзЗржЩрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред 

#### ржирждрзБржи рж╢рзНрж░рзЗржгрзА рждрзИрж░рж┐ ржХрж░рж╛

ржЖржорж░рж╛ ржПржХржЯрж┐ ржирждрзБржи ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░ржм ржпрж╛ `Vehicle` ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐рждред ржПржЯрж┐ рж╕ржХрж▓ ржзрж░ржирзЗрж░ ржкрж░рж┐ржмрж╣ржи ржорж╛ржзрзНржпржоржХрзЗ ржЙржкрж╕рзНржерж╛ржкржи ржХрж░ржмрзЗред

```java
class Vehicle {
    int getInteriorWidth() {
        // ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржЕржнрзНржпржирзНрждрж░рзАржг ржкрзНрж░рж╕рзНрже ржлрзЗрж░ржд ржжрзЗрзЯ
        return 0; // ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк
    }
}

class Car extends Vehicle {
    @Override
    int getInteriorWidth() {
        return getCabinWidth();
    }
    
    int getCabinWidth() {
        return 50; // ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк
    }
}

class RacingCar extends Vehicle {
    @Override
    int getInteriorWidth() {
        return getCockpitWidth();
    }
    
    int getCockpitWidth() {
        return 40; // ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк
    }
}
```

### ржЖржкржбрзЗржЯрзЗржб ржХрж╛рж░ ржЗржЙржЯрж┐рж▓рж╕ ржХрзНрж▓рж╛рж╕

ржПржЦржи `CarUtils` ржХрзНрж▓рж╛рж╕ржЯрж┐ржХрзЗ `VehicleUtils` ржмрж▓рж╛ рж╣ржмрзЗ:

```java
class VehicleUtils {
    List<Vehicle> myVehicles = new ArrayList<>();
    
    void addVehicles() {
        myVehicles.add(new Car());
        myVehicles.add(new Car());
        myVehicles.add(new RacingCar());
    }
    
    void printInteriorWidths() {
        for (Vehicle vehicle : myVehicles) {
            System.out.println(vehicle.getInteriorWidth());
        }
    }
}
```

### ржлрж▓рж╛ржлрж▓

ржПржЦржи, ржпржЦржи ржЖржорж░рж╛ `printInteriorWidths()` ржорзЗржержб ржХрж▓ ржХрж░рж┐, ржкрзНрж░ржержо ржжрзБржЯрж┐ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп `getInteriorWidth()` ржорзЗржержб ржХрж▓ рж╣ржмрзЗ ржПржмржВ рждрж╛рж░рж╛ рждрж╛ржжрзЗрж░ ржирж┐ржЬрж╕рзНржм ржХрзЗржмрж┐ржи ржкрзНрж░рж╕рзНрже ржлрзЗрж░ржд ржжрзЗржмрзЗред рждрзГрждрзАржпрж╝ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржпржУ ржПржХржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ ржХржХржкрж┐ржЯ ржкрзНрж░рж╕рзНрже ржлрзЗрж░ржд ржжрзЗржмрзЗред

## ржЙржкрж╕ржВрж╣рж╛рж░

ржЖржорж░рж╛ ржкрзНрж░ржержо ржЙржжрж╛рж╣рж░ржгрзЗ Liskov Substitution Principle ржкрзНрж░рзЯрзЛржЧ ржХрж░рзЗ ржбрж┐ржЬрж╛ржЗржи ржЙржирзНржиржд ржХрж░рзЗржЫрж┐ред ржПржЗ ржкржжрзНржзрждрж┐ржЯрж┐ "рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐ ржнрж╛ржЩрж╛" ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐рждред  [ "breaking the hierarchy." ]

---

# ЁЯФе03C-Liskov Substitution Principle (LSP) - ржжрзНржмрж┐рждрзАржпрж╝ ржЙржжрж╛рж╣рж░ржг

## ржнрзВржорж┐ржХрж╛

ржПржЗ рж╕рзЗрж╢ржирзЗ, ржЖржорж░рж╛ рж▓рж┐рж╕рзНржХржн рж╕рж╛ржмрж╕рзНржЯрж┐ржЯрж┐ржЙрж╢ржи ржкрзНрж░рж┐ржирзНрж╕рж┐ржкрж▓ (LSP) ржкрзНрж░рзЯрзЛржЧрзЗрж░ ржПржХржЯрж┐ ржжрзНржмрж┐рждрзАржпрж╝ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦржмред ржЖржорж░рж╛ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг `Product` ржХрзНрж▓рж╛рж╕ ржПржмржВ ржПржХржЯрж┐ `InHouseProduct` ржХрзНрж▓рж╛рж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмред ржПржЗ ржЙржжрж╛рж╣рж░ржгржЯрж┐ ржЗ-ржХржорж╛рж░рзНрж╕ рж╕рж╛ржЗржЯрзЗрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг ржерзЗржХрзЗ ржжрзЗржЦрж╛ рж╣ржмрзЗ, ржпрзЗржоржи Amazonред

## ржЙржжрж╛рж╣рж░ржг: ржкржгрзНржп ржПржмржВ ржЗржи-рж╣рж╛ржЙрж╕ ржкржгрзНржп

### ржкрзНрж░рж╛ржержорж┐ржХ ржбрж┐ржЬрж╛ржЗржи

ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржПржХржЯрж┐ `Product` ржХрзНрж▓рж╛рж╕ ржЖржЫрзЗ ржпрж╛ ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржПржмржВ ржПржХржЯрж┐ `getDiscount()` ржорзЗржержб ржзрж╛рж░ржг ржХрж░рзЗред 

```java
class Product {
    double discount = 20; // ржмрзЗрж╕ ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ 20%

    double getDiscount() {
        return discount; // ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржлрзЗрж░ржд ржжрзЗрзЯ
    }
}

class InHouseProduct extends Product {
    void applyExtraDiscount() {
        discount *= 1.5; // ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ 1.5 ржЧрзБржг ржмрзГржжрзНржзрж┐
    }
}
```

### рж╕ржорж╕рзНржпрж╛ ржЪрж┐рж╣рзНржирж┐рждржХрж░ржг

ржПржЦржи, ржЖржорж░рж╛ ржПржХржЯрж┐ `PricingUtils` ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж┐ ржпрж╛ рждрж┐ржиржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ: ржжрзБржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржкржгрзНржп ржПржмржВ ржПржХржЯрж┐ ржЗржи-рж╣рж╛ржЙрж╕ ржкржгрзНржпред 

```java
class PricingUtils {
    List<Product> products = new ArrayList<>();

    void addProducts() {
        products.add(new Product());
        products.add(new Product());
        products.add(new InHouseProduct());
    }

    void printDiscounts() {
        for (Product product : products) {
            if (product instanceof InHouseProduct) {
                ((InHouseProduct) product).applyExtraDiscount(); // ржЗржи-рж╣рж╛ржЙрж╕ ржкржгрзНржпрзЗрж░ ржЬржирзНржп ржЕрждрж┐рж░рж┐ржХрзНржд ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржкрзНрж░рзЯрзЛржЧ
            }
            System.out.println(product.getDiscount()); // ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржкрзНрж░рж┐ржирзНржЯ
        }
    }
}
```

### ржбрж┐ржЬрж╛ржЗржи рждрзНрж░рзБржЯрж┐

ржПржЗ ржбрж┐ржЬрж╛ржЗржирзЗ, `PricingUtils` ржХрзНрж▓рж╛рж╕ржЯрж┐ `instanceof` ржЕржкрж╛рж░рзЗржЯрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржЯрж╛ржЗржк ржкрж░рзАржХрзНрж╖рж╛ ржХрж░ржЫрзЗред ржПржЯрж┐ Liskov Substitution Principle ржПрж░ ржмрж┐рж░рзБржжрзНржзрзЗ ржпрж╛рзЯ, ржХрж╛рж░ржг ржЖржорж╛ржжрзЗрж░ рж╕ржм ржкржгрзНржпржХрзЗ `Product` ржЕржмржЬрзЗржХрзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред

## рж╕ржорж╛ржзрж╛ржи

### ржХрзЛржб ржкрзБржирж░рзНржЧржаржи

ржЖржорж░рж╛ `InHouseProduct` ржХрзНрж▓рж╛рж╕рзЗ `getDiscount()` ржорзЗржержбржЯрж┐ ржУржнрж╛рж░рж░рж╛ржЗржб ржХрж░ржм ржпрж╛рждрзЗ ржПржЯрж┐ ржЕрждрж┐рж░рж┐ржХрзНржд ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржкрзНрж░рзЯрзЛржЧ ржХрж░рзЗред

```java
class InHouseProduct extends Product {
    @Override
    double getDiscount() {
        applyExtraDiscount(); // ржЕрждрж┐рж░рж┐ржХрзНржд ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржкрзНрж░рзЯрзЛржЧ
        return discount; // ржирждрзБржи ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржлрзЗрж░ржд ржжрзЗрзЯ
    }
}
```

### ржЖржкржбрзЗржЯрзЗржб ржкрзНрж░рж╛ржЗржЬрж┐ржВ ржЗржЙржЯрж┐рж▓рж╕ ржХрзНрж▓рж╛рж╕

ржПржЦржи `PricingUtils` ржХрзНрж▓рж╛рж╕рзЗ `instanceof` ржЪрзЗржХ ржмрж╛ржж ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ:

```java
class PricingUtils {
    List<Product> products = new ArrayList<>();

    void addProducts() {
        products.add(new Product());
        products.add(new Product());
        products.add(new InHouseProduct());
    }

    void printDiscounts() {
        for (Product product : products) {
            System.out.println(product.getDiscount()); // ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржкрзНрж░рж┐ржирзНржЯ
        }
    }
}
```

### ржлрж▓рж╛ржлрж▓

ржПржЦржи, ржпржЦржи ржЖржорж░рж╛ `printDiscounts()` ржорзЗржержб ржХрж▓ ржХрж░рж┐, ржПржЯрж┐ рж╕ржм ржкржгрзНржпржХрзЗ рждрж╛ржжрзЗрж░ ржирж┐ржЬрж╕рзНржм ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ ржлрзЗрж░ржд ржжрзЗржмрзЗ, ржПржмржВ ржЗржи-рж╣рж╛ржЙрж╕ ржкржгрзНржпрзЗрж░ ржЬржирзНржп ржЕрждрж┐рж░рж┐ржХрзНржд ржбрж┐рж╕ржХрж╛ржЙржирзНржЯржУ ржкрзНрж░рзЯрзЛржЧ рж╣ржмрзЗред ржПржЗржнрж╛ржмрзЗ, ржЖржорж░рж╛ Liskov Substitution Principle ржПрж░ ржкрж░рзАржХрзНрж╖рж╛рзЯ рж╕ржлрж▓ рж╣рзЯрзЗржЫрж┐ред

## ржЙржкрж╕ржВрж╣рж╛рж░

ржЖржорж░рж╛ ржжрзБржЯрж┐ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржжрзЗржЦрзЗржЫрж┐ред ржкрзНрж░ржержо ржЙржжрж╛рж╣рж░ржгрзЗрж░ рж╕ржорж╛ржзрж╛ржи ржЫрж┐рж▓ "рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐ ржнрж╛ржЩрж╛", ржПржмржВ ржжрзНржмрж┐рждрзАржпрж╝ ржЙржжрж╛рж╣рж░ржгрзЗрж░ рж╕ржорж╛ржзрж╛ржи ржЫрж┐рж▓ "Tell, Don't Ask" ржирзАрждрж┐ ржЕржирзБрж╕рж░ржг ржХрж░рж╛ред 

